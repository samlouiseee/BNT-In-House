<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Weekly Report</title>

<style>
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  background:linear-gradient(135deg,#00b894,#0984e3);
}
.navbar{
  position:relative;
  z-index:5;
  display:flex;
  align-items:center;
  justify-content:flex-start;
  flex-wrap:wrap;
  padding:10px 20px;
  background:rgba(238, 237, 237, 0.35);
  backdrop-filter: blur(6px);
}
.logo {
  height:90px; 
  margin-right:30px;
  cursor:pointer;
}
.navbar button{
  background:#74b9ff;
  border:none;
  padding:10px;
  border-radius:8px;
  color:#fff;
  font-weight:bold;
  cursor:pointer;
  flex:1;
  margin:3px;
}
.navbar button:hover{background:#0984e3}


.section{
  background:#fff;
  margin:10px;
  padding:20px;
  border-radius:12px;
  box-shadow:0 8px 20px rgba(0,0,0,.2);
}

h2{text-align:center}


table{
  width:100%;
  border-collapse:collapse;
  margin-top:20px;
  font-size:14px;
}
th, td{
  border:1px solid #aaa;
  padding:6px;
  vertical-align:top;
  text-align:center; 
}
th{background:#f2f2f2}


input.editable, textarea.editable{
  width:90%;
  box-sizing:border-box;
  border:1px solid #ccc;
  border-radius:4px;
  padding:4px;
  font-size:14px;
  font-family:inherit;
  line-height:1.3;
  text-align:left; 
  resize:none;
  margin:auto;
  display:block;
}


textarea.editable{
  min-height:60px;
  overflow:hidden;
}


button.action{
  background:#0984e3;
  color:#fff;
  border:none;
  padding:6px 12px;
  border-radius:5px;
  cursor:pointer;
  margin-top:10px;
}
button.action:hover{background:#0652dd}
</style>
</head>
<body>

<div class="navbar">
  <img src="VHBC.png" alt="VHBC Logo" class="logo" onclick="location.href='index.html'">
  <button onclick="location.href='index.html'">Home</button>
  <button onclick="location.href='report.html'">Report</button>
  <button onclick="location.href='tripping.html'">Tripping & Sales</button>
  <button onclick="location.href='manning.html'">Manning</button>
  <button onclick="location.href='activities.html'">Activities</button>
  <button onclick="location.href='lot-calculator.html'">Lot Calculator</button>
</div>

<div class="section">
  <h2>Weekly Report</h2>

  <table id="reportTable">
    <tr>
      <th>Date</th>
      <th>Team</th>
      <th>Weekly Report</th>
    </tr>
  </table>

  <button class="action" onclick="addRow()">Add Row</button>
</div>

<script>
function saveData(){
  const table = document.getElementById('reportTable');
  const data = [];
  Array.from(table.rows).forEach((row, rIndex)=>{
    if(rIndex === 0) return;
    const rowData = [];
    rowData.push(row.cells[0].querySelector('input').value);
    rowData.push(row.cells[1].querySelector('input').value);
    rowData.push(row.cells[2].querySelector('textarea').value);
    data.push(rowData);
  });
  localStorage.setItem('reportTable', JSON.stringify(data));
}

function loadData(){
  const data = JSON.parse(localStorage.getItem('reportTable') || '[]');
  data.forEach(rowData => addRow(rowData[0], rowData[1], rowData[2]));
}


function autoExpand(textarea){
  textarea.style.height = 'auto';
  textarea.style.height = textarea.scrollHeight + 'px';
}

function addRow(dateValue="", teamValue="", reportValue=""){
  const table = document.getElementById('reportTable');
  const row = table.insertRow(-1);


  const cell1 = row.insertCell();
  const inputDate = document.createElement('input');
  inputDate.className = 'editable';
  inputDate.value = dateValue;
  inputDate.oninput = saveData;
  cell1.appendChild(inputDate);


  const cell2 = row.insertCell();
  const inputTeam = document.createElement('input');
  inputTeam.className = 'editable';
  inputTeam.value = teamValue;
  inputTeam.oninput = saveData;
  cell2.appendChild(inputTeam);


  const cell3 = row.insertCell();
  const textarea = document.createElement('textarea');
  textarea.className = 'editable';
  textarea.value = reportValue;
  textarea.oninput = () => {
    autoExpand(textarea);
    saveData();
  };
  cell3.appendChild(textarea);
  autoExpand(textarea);

  saveData();
}


loadData();
</script>
</body>
</html>
