<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Lot Calculator</title>
<style>
body {
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  background: linear-gradient(135deg, #00b894, #0984e3);
}
.navbar{
  position:relative;
  z-index:5;
  display:flex;
  align-items:center;
  justify-content:flex-start;
  flex-wrap:wrap;
  padding:10px 20px;
  background:rgba(238, 237, 237, 0.35);
  backdrop-filter: blur(6px);
}
.logo {
  height:90px; 
  margin-right:30px;
  cursor:pointer;
}
.navbar button {
  background:#74b9ff;
  border:none;
  padding:10px 12px;
  border-radius:8px;
  color:white;
  font-weight:bold;
  cursor:pointer;
  margin:3px;
  flex:1;
  min-width:100px;
  transition:0.3s;
}
.navbar button:hover {
  background:#0984e3;
  transform: translateY(-2px);
}

.section {
  padding:20px;
  background:rgba(255,255,255,0.95);
  margin:20px auto;
  border-radius:12px;
  box-shadow:0 8px 25px rgba(0,0,0,0.3);
  max-width:800px;
  display: flex;
  flex-wrap: wrap;
  gap:20px;
}
h2 {
  width:100%;
  text-align:center;
  color:#0984e3;
  margin-bottom:20px;
  text-shadow: 1px 1px #74b9ff;
}


.inputs, .results {
  flex:1 1 300px;
  display:flex;
  flex-direction: column;
}
label {
  font-weight:bold;
  margin-top:10px;
}
input, select, button.calc-btn {
  width:100%;
  padding:10px;
  margin:6px 0 12px 0;
  border-radius:6px;
  border:1px solid #ccc;
  box-sizing:border-box;
  font-size:14px;
}

button.calc-btn {
  background:#0984e3;
  color:white;
  font-weight:bold;
  border:none;
  cursor:pointer;
  transition:0.2s;
}
button.calc-btn:hover {
  background:#0652dd;
  transform: scale(1.03);
}

.result-field {
  margin:6px 0;
  font-weight:bold;
  font-size:14px;
  color:#2d3436;
  background:#dfe6e9;
  padding:10px;
  border-radius:6px;
}
</style>
</head>
<body>

<div class="navbar">
  <img src="VHBC.png" alt="VHBC Logo" class="logo" onclick="location.href='index.html'">
  <button onclick="location.href='index.html'">Home</button>
  <button onclick="location.href='report.html'">Report</button>
  <button onclick="location.href='tripping.html'">Tripping & Sales</button>
  <button onclick="location.href='manning.html'">Manning</button>
  <button onclick="location.href='activities.html'">Activities</button>
  <button onclick="location.href='lot-calculator.html'">Lot Calculator</button>
</div>

<div class="section">
  <h2>Lot Price Calculator</h2>
  
  <div class="inputs">
    <label>Location:</label>
    <select id="location"></select>
    
    <label>Plan:</label>
    <select id="plan"></select>
    
    <label>Price per sqm (PHP):</label>
    <input id="pricePerSqm" type="number" placeholder="Enter price">
    
    <label>Lot Area (sqm):</label>
    <input id="lotArea" type="number" placeholder="Enter area">
    
    <label>Down Payment %:</label>
    <input id="downPaymentPercent" type="number" placeholder="Enter %">
    
    <label>Reservation Fee (PHP):</label>
    <input id="reservationFee" type="number" placeholder="Enter fee">
    
    <label>Number of Years:</label>
    <input id="numYears" type="number" placeholder="Enter years" min="1">
    
    <label>Annual Interest Rate (%):</label>
    <input id="interestRate" type="number" placeholder="Enter % per year" min="0">
    
    <button class="calc-btn" onclick="calculateLot()">Calculate</button>
  </div>

  <div class="results">
    <div class="result-field" id="discountedPrice">Discounted Price per sqm: —</div>
    <div class="result-field" id="totalContractPrice">Total Contract Price: —</div>
    <div class="result-field" id="downPayment">Down Payment (less RF): —</div>
    <div class="result-field" id="balance">Balance: —</div>
    <div class="result-field" id="monthlyPayment">Monthly Amortization: —</div>
  </div>
</div>

<script>
const discounts = {
  MVLC: {"Plan A":0.3,"Plan B":0.2,"Plan C":0.15,"Plan D":0.1,"Plan E":0},
  ERHD: {"Plan A":0.4,"Plan B":0.3,"Plan C":0.20,"Plan D":0.1,"Plan E":0}
};

const locationSelect = document.getElementById("location");
locationSelect.innerHTML = `<option value="MVLC">MVLC</option><option value="ERHD">ERHD</option>`;
locationSelect.onchange = updatePlans;
updatePlans();

function updatePlans(){
  const locationVal = locationSelect.value;
  const planSelect = document.getElementById("plan");
  planSelect.innerHTML = "";
  for(const p in discounts[locationVal]){
    const opt = document.createElement("option");
    opt.value = discounts[locationVal][p];
    opt.textContent = `${p} - ${discounts[locationVal][p]*100}%`;
    planSelect.appendChild(opt);
  }
}

function formatCurrency(num){return num.toLocaleString('en-PH',{style:'currency',currency:'PHP'});}
function monthlyPayment(principal, annualRate, months){
  if(months<=0) return 0;
  if(annualRate<=0) return principal/months;
  const r=annualRate/12/100;
  return principal*r*Math.pow(1+r,months)/(Math.pow(1+r,months)-1);
}

function calculateLot(){
  const price=parseFloat(document.getElementById("pricePerSqm").value)||0;
  const area=parseFloat(document.getElementById("lotArea").value)||0;
  const discount=parseFloat(document.getElementById("plan").value)||0;
  const dpPercent=parseFloat(document.getElementById("downPaymentPercent").value)||0;
  const rf=parseFloat(document.getElementById("reservationFee").value)||0;
  const years=parseFloat(document.getElementById("numYears").value)||0;
  const interest=parseFloat(document.getElementById("interestRate").value)||0;

  const discountedPrice=price*(1-discount);
  const totalPrice=discountedPrice*area;
  const downPayment=totalPrice*(dpPercent/100);
  const downLessRF=Math.max(downPayment-rf,0);
  const balance=Math.max(totalPrice-downPayment,0);
  const months=years*12;
  const monthly=monthlyPayment(balance,interest,months);

  document.getElementById("discountedPrice").textContent="Discounted Price per sqm: "+formatCurrency(discountedPrice);
  document.getElementById("totalContractPrice").textContent="Total Contract Price: "+formatCurrency(totalPrice);
  document.getElementById("downPayment").textContent="Down Payment (less RF): "+formatCurrency(downLessRF);
  document.getElementById("balance").textContent="Balance: "+formatCurrency(balance);
  document.getElementById("monthlyPayment").textContent="Monthly Amortization: "+formatCurrency(monthly);
}
</script>

</body>
</html>
